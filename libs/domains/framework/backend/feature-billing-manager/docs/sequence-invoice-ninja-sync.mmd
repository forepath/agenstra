sequenceDiagram
    participant User
    participant BillingAPI
    participant InvoiceNinja
    participant Database

    User->>BillingAPI: GET /invoices/:subscriptionId
    BillingAPI->>Database: Load customer profile
    BillingAPI->>InvoiceNinja: Create/Update client
    InvoiceNinja-->>BillingAPI: clientId
    BillingAPI->>Database: Persist invoice refs
    BillingAPI-->>User: Invoice list + preAuth URLs
